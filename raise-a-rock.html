<!DOCTYPE html>
<html>
    <head>
        <title>raise a pet rock</title>
        <link id="favicon" rel="icon" type="image/x-icon" href="Assets/Raise-A-Rock/baby-rock.png">
        <style>
            button {
                background-color: rgb(150, 150, 150);
                border-color: rgb(150, 150, 150);
                border-radius: 5px;
                border-width: 2px;
                color: rgb(255, 255, 255);
                cursor: click;
                font-family: Comic Sans MS, Chalkboard SE;
            }
            body {
                background: rgb(255, 255, 255);
                font-family: Comic Sans MS, Chalkboard SE;
                text-align: center;
            }
            select {
                background-color: rgb(200, 200, 200);
                border-radius: 5px;
                border-width: 0px;
                color: rgb(50, 50, 50);
                font-family: Chalkboard SE;
                text-align: center;
            }
            .submit {
                background-color: rgb(125, 215, 125);
                border-radius: 5px;
                border-width: 0px;
                color: rgb(255, 255, 255);
                font-family: Chalkboard SE;
            }
        </style>
    </head>
    <body>
        <h1>"<name>Rocky</name>"</h1>
        <h2>Age: <a id="age">1</a></h2>
        <div id="alerts"></div>
        <img id="rock" src="../Assets/Raise-A-Rock/baby-rock.png" height="125px" width="auto" draggable="false" ondragover="override(event);" ondrop="use(event);"><br>
        <img id="tool" src="../Assets/Raise-A-Rock/plant.png" width="auto" height="75px" style="visibility: hidden;" draggable="true" ondragstart="saveTool(event);">
        <p id="fullDisplay"><a id="full">100</a>% full</p>
        <button id="feedButton" onclick="toggleFood();">Feed <name>Rocky</name></button><br>
        <label id="foodLabel" for="foodList" style="visibility: hidden;">Selected food: </label>
        <select id="foodList" style="visibility: hidden;">
            <option value="plant">Plant</option>
            <option value="rock kibbles">Rock Kibbles</option>
            <option value="cheese">Cheese</option>
            <option value="gigagrowth gummies">GigaGrowth Gummies</option>
        </select>
        <button id="setFood" style="visibility: hidden;" onclick="applyFood();" class="submit">Save Changes</button>
        <p id="cleanDisplay"><a id="clean">100</a>% clean</p>
        <button id="bathButton">Bathe <name>Rocky</name></button><br>
        <label id="bathLabel" for="toolList" style="visibility: hidden;">Selected tool: </label>
        <select id="toolList" style="visibility: hidden;">
            <option value="shower">Shower Head</option>
            <option value="sponge">Sponge</option>
        </select>
        <button id="setTool" style="visibility: hidden;" onclick="applyTool();" class="submit">Save Changes</button>
        <p id="happyDisplay"><a id="happy">100</a>% happy</p>
        <button id="playButton" onclick="play();">Play with <name>Rocky</name></button><br><br>
        <button id="renameButton" onclick="rename();">Rename <name>Rocky</name></button><br>
        <button id="pauseButton" onclick="toggleTicking();">Pause game</button><br>
        <button id="importButton" onclick="importData();">Import game data</button>
        <button id="exportButton" onclick="exportData();">Export game data</button>
        <!--script src="Scripts/raise-a-rock.js"></script-->
        <script>
            var age = 1;
            if (localStorage.getItem("age") != null) {
                age = Number(localStorage.getItem("age"));
            };
            
            const rocks = {
                good: {
                    super: ["Assets/Raise-A-Rock/mr-rockhead.png"],
                    clean: ["Assets/Raise-A-Rock/pearl-rock.png"],
                    happy: ["Assets/Raise-A-Rock/playful-rock.png"],
                    good: ["Assets/Raise-A-Rock/kawaii-rock.png", "Assets/Raise-A-Rock/bird-rock.png", "Assets/Raise-A-Rock/mount-rushmore.png"],
                    neutral: ["Assets/Raise-A-Rock/ponytail-rock.png", "Assets/Raise-A-Rock/headband-rock.png", "Assets/Raise-A-Rock/bush-rock.png", "Assets/Raise-A-Rock/roblox-rock.png", "Assets/Raise-A-Rock/slamo-rock.png"],
                    bad: ["Assets/Raise-A-Rock/adopt-me-rock.png", "Assets/Raise-A-Rock/cheeky-rock.png", "Assets/Raise-A-Rock/moai.png"],
                },
                bad: {
                    good: ["Assets/Raise-A-Rock/bricks.png", "Assets/Raise-A-Rock/man-rock.png", "Assets/Raise-A-Rock/expressionless-rock.png"],
                    neutral: ["Assets/Raise-A-Rock/potato-rock.png", "Assets/Raise-A-Rock/egg-rock.png", "Assets/Raise-A-Rock/house-rock.png", "Assets/Raise-A-Rock/goggly-eyed-rock.png"],
                    bad: ["Assets/Raise-A-Rock/moldy-rock.png", "Assets/Raise-A-Rock/magma.png", "Assets/Raise-A-Rock/eroded-rock.png", "Assets/Raise-A-Rock/obese-rock.png"],
                }
            };

            const bools = [true, false, false];

            const defaultNames = ["Rocky", "Rocko", "Pebbles", "The Rock", "BaRock Obama"];
            var name = defaultNames[Math.floor(Math.random() * (defaultNames.length - 1))];
            if (localStorage.getItem("name") && age > 0) {
                name = localStorage.getItem("name");
            };

            let names = document.getElementsByTagName("name");
            for (let i = 0; i < names.length; i++) {
                names[i].innerHTML = name;
            };

            if (localStorage.getItem("faves") && age > 0) {
                const faves = localStorage.getItem("faves");
            } else {
                const faves = [Math.floor(Math.random() * 2), Math.floor(Math.random() * 2), Math.floor(Math.random() * 2)];
            };
            
            const sadEmojis = ["ðŸ˜¢", "ðŸ˜­", "ðŸ˜¿", "T-T", "ToT", "TnT", "T^T", ":(", ":[", "i^i"];
            
            const deathMessages = {
                hunger: ["Your rock died from hunger.", "You didn't feed your rock and it starved to death."],
                filth: ["Your rock died from filth.", "You didn't bathe your rock and it died from bacteria buildup."],
                depression: ["Your rock died from depression.", "You didn't play with your rock and it got depressed."],
            };
            
            var full = document.getElementById("full");
            if (localStorage.getItem("full") && age > 0) {
                full = localStorage.getItem("full");
            };
            var clean = document.getElementById("clean");
            if (localStorage.getItem("clean") && age > 0) {
                clean = localStorage.getItem("clean");
            };
            var happy = document.getElementById("happy");
            if (localStorage.getItem("happy") && age > 0) {
                happy = localStorage.getItem("happy");
            };
            var timesHungry = 0;
            if (localStorage.getItem("timesHungry") && age > 0) {
                timesHungry = localStorage.getItem("timesHungry");
            };
            var timesDirty = 0;
            if (localStorage.getItem("timesDirty") && age > 0) {
                timesDirty = localStorage.getItem("timesDirty");
            };
            var timesSad = 0;
            if (localStorage.getItem("timesSad") && age > 0) {
                timesBored = localStorage.getItem("timesSad");
            };
            var visibleF = false;
            var visibleC = false;
            var ticking = true;

            var favicon = document.getElementById("favicon");
            var ageDisplay = document.getElementById("age");
            var rock = document.getElementById("rock");
            var alerts = document.getElementById("alerts");
            var tool = document.getElementById("tool");
            var feedButton = document.getElementById("feedButton");
            var foodLabel = document.getElementById("foodLabel");
            var foodList = document.getElementById("foodList");
            var setFood = document.getElementById("setFood");
            var bathButton = document.getElementById("bathButton");
            var bathLabel = document.getElementById("bathLabel");
            var toolList = document.getElementById("toolList");
            var setTool = document.getElementById("setTool");
            var playButton = document.getElementById("playButton");
            var renameButton = document.getElementById("renameButton");
            var pauseButton = document.getElementById("pauseButton");
            var importButton = document.getElementById("importButton");
            var exportButton = document.getElementById("exportButton");

            function death(type) {
                ticking = false;
                tool.style.visibility = "hidden";
                feedButton.style.visibility = "hidden";
                foodList.style.visibility = "hidden";
                setFood.style.visibility = "hidden";
                bathButton.style.visibility = "hidden";
                toolList.style.visibility = "hidden";
                setTool.style.visibility = "hidden";
                playButton.style.visibility = "hidden";
                renameButton.style.visibility = "hidden";
                pauseButton.style.visibility = "hidden";
                importButton.style.visibility = "hidden";
                exportButton.style.visibility = "hidden";
                
                let deathType = "hunger";
                if (type == 2) {
                    deathType = "filth";
                } else if (type == 3) {
                    deathType = "depression";
                };
                let deathAlert = document.createElement("h3");
                let sadEmoji = sadEmojis[Math.floor(Math.random() * (sadEmojis.length - 1))];
                let deathMessage = deathMessages[deathType][Math.floor(Math.random() * (deathMessages[deathType].length - 1))];
                deathAlert.innerHTML = sadEmoji + " " + deathMessage + " " + sadEmoji;
                alerts.appendChild(deathAlert);
                let reload = document.createElement("button");
                reload.innerHTML = "Restart game";
                reload.addEventListener("onclick", function() {location.reload()});
                alerts.appendChild(reload);
            };

            function tick() {
                setInterval(function() {
                    if (ticking == true) {
                        age = Number(Number(age + 0.01).toFixed(2));
                        ageDisplay.innerHTML = age;
                        
                        let hungry = bools[Math.floor(Math.random() * (bools.length - 1))];
                        if (hungry == true) {
                            full.innerHTML = Number(full.innerHTML) - 2;
                            if (Number(full.innerHTML) < 1) {
                                death(1);
                            } else if (Number(full.innerHTML) < 50) {
                                timesHungry++;
                                let notif = document.createElement("h3");
                                notif.innerHTML = name + " is getting hungry!";
                                notif.id = "warning";
                                alerts.appendChild(notif);
                            };
                        };
            
                        let dirty = bools[Math.floor(Math.random() * (bools.length - 1))];
                        if (dirty == true) {
                            clean.innerHTML = Number(clean.innerHTML) - 2;
                            if (Number(clean.innerHTML) < 1) {
                                death(2);
                            } else if (Number(clean.innerHTML) < 50) {
                                timesDirty++;
                                let notif = document.createElement("h3");
                                notif.innerHTML = name + " is getting dirty!";
                                notif.id = "warning";
                                alerts.appendChild(notif);
                            };
                        };
                        
                        let bored = bools[Math.floor(Math.random() * (bools.length - 1))];
                        if (bored == true) {
                            happy.innerHTML = Number(happy.innerHTML) - 2;
                            if (Number(happy.innerHTML) < 1) {
                                death(3);
                            } else if (Number(happy.innerHTML) < 50) {
                                timesSad++;
                                let notif = document.createElement("h3");
                                notif.innerHTML = name + " is becoming depressed!";
                                notif.id = "warning";
                                alerts.appendChild(notif);
                            };
                        };
                        
                        if (age >= 2.5 && age < 7.5) {
                            if (timesHungry < 4 && timesDirty < 4 && timesSad < 4) {
                                rock.src = "Assets/Raise-A-Rock/kid-rock-happy.png";
                            } else {
                                rock.src = "Assets/Raise-A-Rock/kid-rock-sad.png";
                            };
                        } else if (age <= 7.5) {
                            if (timesHungry < 3 && timesDirty < 3 && timesSad < 3) {
                                if (rock.src == "Assets/Raise-A-Rock/kid-rock-happy.png") {
                                    rock.src = rocks["good"]["super"][Math.floor(Math.random() * (rocks["good"]["super"].length - 1))];
                                };
                            } else if (timesDirty <= 1) {
                                rock.src = rocks["good"]["clean"][Math.floor(Math.random() * (rocks["good"]["clean"].length - 1))];
                            } else if (timesSad <= 1) {
                                rock.src = rocks["good"]["happy"][Math.floor(Math.random() * (rocks["good"]["happy"].length - 1))];
                            } else if (timesHungry <= 4 && timesDirty <= 4 && timesSad <= 4) {
                                if (rock.src == "Assets/Raise-A-Rock/kid-rock-happy.png") {
                                    rock.src = rocks["good"]["good"][Math.floor(Math.random() * (rocks["good"]["good"].length - 1))];
                                } else {
                                    rock.src = rocks["bad"]["good"][Math.floor(Math.random() * (rocks["bad"]["good"].length - 1))];
                                };
                            } else if (timesHungry <= 7 && timesDirty <= 7 && timesSad <= 7) {
                                if (rock.src == "Assets/Raise-A-Rock/kid-rock-happy.png") {
                                    rock.src = rocks["good"]["neutral"][Math.floor(Math.random() * (rocks["good"]["neutral"].length - 1))];
                                } else {
                                    rock.src = rocks["bad"]["neutral"][Math.floor(Math.random() * (rocks["bad"]["neutral"].length - 1))];
                                };
                            } else if (timesHungry >= 8 && timesDirty >= 8 && timesSad >= 8) {
                                if (rock.src == "Assets/Raise-A-Rock/kid-rock-happy.png") {
                                    rock.src = rocks["good"]["bad"][Math.floor(Math.random() * (rocks["good"]["bad"].length - 1))];
                                } else {
                                    rock.src = rocks["bad"]["bad"][Math.floor(Math.random() * (rocks["bad"]["bad"].length - 1))];
                                };
                            };
                        };
                    };
                    localStorage.setItem("age", age);
                    localStorage.setItem("name", name);
                    localStorage.setItem("faves", faves);
                    localStorage.setItem("full", full);
                    localStorage.setItem("clean", clean);
                    localStorage.setItem("happy", happy);
                    localStorage.setItem("timesHungry", timesHungry);
                    localStorage.setItem("timesDirty", timesDirty);
                    localStorage.setItem("timesSad", timesSad);
                    //localStorage.setItem("", );
                }, 1000);
            };

            function override(event) {
                event.preventDefault();
            };

            function saveTool(event) {
                event.dataTransfer.setData("tool", event.target.id);
            };

            function use(event) {
                event.preventDefault();
                let data = event.dataTransfer.getData("tool");
                if (data == "plant" || data == "rock kibbles" || data == "cheese" || data == "gigagrowth gummies") {
                    let fullness = Number(full.innerHTML);
                    let inc = 5;
                    if (fullness < 100 && fullness + inc <= 100) {
                        full.innerHTML = fullness + inc;
                        if (data == "gigagrowth gummies") {
                            rock.height = rock.height * 1.05;
                            rock.width = rock.width * 1.05;
                        };
                    } else if (fullness < 100 && fullness + inc > 100) {
                        full.innerHTML = 100;
                        if (data == "gigagrowth gummies") {
                            rock.height = rock.height * 1.05;
                            rock.width = rock.width * 1.05;
                        };
                    };
                };
                if (data == "shower" || data == "sponge") {
                    let cleanliness = Number(clean.innerHTML);
                    let inc = 5;
                    if (cleanliness < 100 && cleanliness + inc <= 100) {
                        clean.innerHTML = cleanliness + inc;
                    } else if (cleanliness < 100 && cleanliness + inc > 100) {
                        clean.innerHTML = 100;
                    };
                };
            };
            
            function toggleFood() {
                if (visibleF == true) {
                    visibleF = false;
                    foodLabel.style = "visibility: hidden;";
                    foodList.style = "visibility: hidden;";
                    setFood.style = "visibility: hidden;";
                } else {
                    visibleF = true;
                    foodLabel.style = "visibility: visible;";
                    foodList.style = "visibility: visible;";
                    setFood.style = "visibility: visible;";
                };
                if (visibleC == true) {
                    visibleC = false;
                    bathLabel.style = "visibility: hidden;";
                    toolList.style = "visibility: hidden;";
                    setTool.style = "visibility: hidden;";
                };
            };
            
            function applyFood() {
                let food = foodList.value;
                switch(food) {
                    case "plant":
                        tool.src = "Assets/Raise-A-Rock/plant.png";
                        break;
                    case "variety":
                        tool.src = "Assets/Raise-A-Rock/variety.png";
                        break;
                    case "white":
                        tool.src = "Assets/Raise-A-Rock/white.png";
                        break;
                };
            };
            
            function applyTool() {
                let tool = toolList.value;
                switch(tool) {
                    case "shower":
                        tool.src = "Assets/Raise-A-Rock/shower.png";
                        break;
                    case "sponge":
                        tool.src = "Assets/Raise-A-Rock/sponge.png";
                        break;
                };
            };
            
            function play() {
                let happiness = Number(happy.innerHTML);
                let inc = 1; // Increment
                if (happiness < 100 && happiness + inc <= 100) {
                    happy.innerHTML = happiness + inc;
                } else if (happiness < 100 && happiness + inc > 100) {
                    happy.innerHTML = 100;
                };
            };
            
            function rename() {
                let newName = prompt("Enter a new name for " + name);
                if (newName.trim() != "" && newName != null) {
                    name = newName.trim();
                    alert("Set new name to " + newName.trim());
                };
            };
            
            function toggleTicking() {
                if (ticking == false) {
                    ticking = true;
                    pauseButton.innerHTML = "Pause game";
                } else {
                    ticking = false;
                    pauseButton.innerHTML = "Unpause game";
                };
            };
            
            function importData() {
                //
            };
            
            function exportData() {
                //
            };
            
            window.onload = tick;
        </script>
    </body>
</html>



