<!DOCTYPE html>
<html>
    <head>
        <title>&#128214 NunnerLibrary &#128218</title>
        <meta charset="UTF-8">
        <link rel="icon" href="">
        <style>
            html {
                color: rgb(0, 0, 0);
                font-family: Comic Sans MS, Chalkboard SE;
                text-align: center;
            }
            .book {
                background-color: lightyellow;
                display: grid;
                grid-template-columns: 1fr 1fr;
                grid-gap: 20px;
                margin-left: 275px;
                text-align: left;
                width: 555px;
            }
            .page {
                font-family: monospace;
                margin: 5px;
            }
        </style>
    </head>
    <body>
        <h1>&#128214 NunnerLibrary &#128218</h1>
        <h2>Click on a book to start reading</h2>
        <button id="book1" onclick="openBook(1)">placeholder book</button><br>
        <div class="book" id="book">
            <div class="page" id="pageL"></div>
            <div class="page" id="pageR"></div><br>
        </div>
        <button id="back" onclick="backPage()">←</button>
        <button id="close" onclick="closeBook()">×</button>
        <button id="next" onclick="nextPage()">→</button>
        <br>
        <button id="mobile" onclick="setMobile()">Mobile mode: ON</button>
        <!--script src="Scripts/library.js"></script-->
        <script>
            var book = document.getElementById("book");
            var pageL = document.getElementById("pageL");
            var pageR = document.getElementById("pageR");
            var back = document.getElementById("back");
            var close = document.getElementById("close");
            var next = document.getElementById("next");
            var mobile = document.getElementById("mobile");
            var currentBook = null;
            var pageNumL = -1;
            var pageNumR = 0;
            var mobileOn = false;

            const books = {
                book1: [
                    "title",
                    "a",
                    "the end"
                ],
            };

            function openBook(bookId) {
                currentBook = bookId;
                book.style = "visibility: visible";
                back.style = "visibility: visible";
                close.style = "visibility: visible";
                next.style = "visibility: visible";
                pageL.innerHTML = "";
                pageR.innerHTML = books["book" + currentBook][0];
                pageNumL = -1;
                pageNumR = 0;
            };
            
            function backPage() {
                if (pageNumL > -1) {
                    alert("flipped page back");
                    pageNumL -= 2;
                    pageNumR -= 2;
                    pageL.innerHTML = books["book" + currentBook][pageNumL]];
                    pageR.innerHTML = books["book" + currentBook][pageNumR]];
                    if (pageNumL <= -1) {
                        pageL.innerHTML = "";
                    };
                    if (pageNumR >= books["book" + currentBook].length) {
                        pageR.innerHTML = "";
                    };
                };
            };
            
            function closeBook() {
                book.style = "visibility: hidden";
                back.style = "visibility: hidden";
                close.style = "visibility: hidden";
                next.style = "visibility: hidden";
                pageL.innerHTML = "";
                pageR.innerHTML = "";
                pageNumL = -1;
                pageNumR = 0;
                currentBook = null;
                alert("closed book #" + currentBook);
            };
            
            function nextPage() {
                if (books["book" + currentBook][pageNumL + 2] ~= null) {
                    alert("flipped page forward");
                    pageNumL += 2;
                    pageNumR += 2;
                    pageL.innerHTML = books["book" + currentBook][pageNumL]];
                    pageR.innerHTML = books["book" + currentBook][pageNumR]];
                    if (pageNumR >= books["book" + currentBook].length) {
                        pageR.innerHTML = "";
                    };
                };
            };
            
            function setMobile() {
                if (mobileOn == true) {
                    mobileOn = false;
                } else {
                    mobileOn = true;
                };
            };

            book.style = "visibility: hidden";
            pageL.innerHTML = "";
            pageR.innerHTML = "";
            back.style = "visibility: hidden";
            close.style = "visibility: hidden";
            next.style = "visibility: hidden";

            /*document.getElementById("book1").addEventListener("click", function() {
                let bookId = 1;
                alert("opened book #" + bookId);
                openBook(bookId);
            });*/
            document.getElementById("back").addEventListener("click", backPage);
            document.getElementById("close").addEventListener("click", closeBook);
            document.getElementById("next").addEventListener("click", nextPage);
            document.getElementById("mobile").addEventListener("click", setMobile);
        </script>
    </body>
</html>
